# Web Screenshot Tool

一个强大的命令行网页截图工具，可以智能截取网页内容并自动拼接为PDF文件，自动去除重复的页面结构元素。

## 功能特性

- 🖼️ **智能内容截图**：自动隐藏header、footer、导航栏等固定元素，只截取页面主要内容
- 📄 **自动PDF生成**：将截图自动拼接为PDF文件
- 🔄 **智能去重**：避免重复的页面结构，确保内容连贯
- 📏 **自适应宽度**：自动调整浏览器窗口宽度以捕获完整页面
- 🧹 **自动清理**：程序结束或中断时自动清理临时文件
- ⚡ **高效处理**：优化的截图策略，支持长页面处理

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 基本用法

```bash
python app.py "https://example.com"
```

### 多个网页

```bash
python app.py "https://example.com" "https://google.com" "https://github.com"
```

### 处理特殊字符

如果URL包含特殊字符（如`&`），请用引号包裹：

```bash
python app.py "https://www.google.com/search?q=test&source=hp"
```

## 输出文件

程序会在当前目录生成以下文件：

- `YYYYMMDD_HHMMSS_页面标题.pdf` - 主要的PDF文件，文件名包含时间戳和页面标题

## 技术特性

### 智能去重策略
- 自动隐藏固定定位的header、footer、导航栏等元素
- 从0像素开始截图，覆盖完整页面内容
- 使用1000px步长，确保内容连贯且无重复
- 最多15张截图，避免过多文件

### 页面处理优化
- 自动检测页面高度，限制最大高度为10000px
- 处理异常页面高度，防止无限截图
- 支持各种类型的网页（新闻、博客、企业网站等）

### 文件管理
- 自动清理临时截图文件
- 支持Ctrl+C中断时的文件清理
- 防止临时文件堆积

### 错误处理
- 网络超时保护
- 页面加载失败重试
- 异常情况的优雅处理

## 系统要求

- Python 3.7+
- Chrome浏览器
- 网络连接

## 依赖包

- `selenium` - 浏览器自动化
- `PIL` (Pillow) - 图像处理
- `webdriver_manager` - Chrome驱动管理

## 注意事项

1. **首次运行**：程序会自动下载ChromeDriver，可能需要一些时间
2. **网络连接**：确保网络连接稳定，避免截图失败
3. **内存使用**：长页面截图可能占用较多内存
4. **文件大小**：生成的PDF文件可能较大，建议检查磁盘空间

## 故障排除

### 常见问题

1. **ChromeDriver下载失败**
   - 检查网络连接
   - 确保Chrome浏览器已安装

2. **截图超时**
   - 检查目标网站是否可访问
   - 尝试访问其他网站测试

3. **页面高度异常**
   - 程序会自动限制页面高度为10000px
   - 对于超长页面，会截取前10000px内容

4. **临时文件未清理**
   - 程序会自动清理，如遇问题可手动删除`temp_*.png`文件

## 开发说明

### 核心功能
- `capture_full_page()` - 智能内容截图，隐藏固定元素
- `stitch_screenshots()` - 图片拼接
- `convert_to_pdf()` - PDF生成

### 优化策略
- 使用JavaScript隐藏固定定位元素
- 从0像素开始截图，覆盖完整页面
- 1000px步长，平衡效率和内容连贯性
- 最多15张截图限制，避免过多文件

## 更新日志

### v2.0 (最新)
- ✅ 智能去重：自动隐藏header、footer等固定元素
- ✅ 内容优化：只截取页面主要内容，避免重复
- ✅ 高度限制：自动处理异常页面高度
- ✅ 步长优化：1000px步长，确保内容连贯

### v1.0
- 基础网页截图功能
- PDF生成和拼接

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request来改进这个工具！
